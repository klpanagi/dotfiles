# Set Zsh as the default Tmux shell
set -g default-shell /bin/zsh
set -g default-command /bin/zsh

# utf8
set -g utf8 on
set -g status-utf8 on

# Change Prefix
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# make tmux display things in 256 colors
set -g default-terminal "screen-256color"
set-option -g xterm-keys on

# Start Numbering at 1
set -g base-index 1

# history
set -g history-limit 4096

# Faster command sequences
set -s escape-time 0

# Set aggressive resize when multiple clients attach to a session
setw -g aggressive-resize on

# allow terminal scrolling
set-option -g terminal-overrides 'xterm*:smcup@:rmcup@'

# ---------------------
# Window options
# ---------------------
set-window-option -g utf8 on
set-window-option -g monitor-activity on
# Renumber windows when a window is closed
set -g renumber-windows on

# ---------------------
# Copy & Paste
# ---------------------
# provide access to the clipboard for pbpaste, pbcopy
#set-option -g default-command "reattach-to-user-namespace -l zsh"
set-window-option -g automatic-rename off
# don't rename windows automatically
set-option -g allow-rename off
# use vim keybindings in copy mode
setw -g mode-keys vi
# setup 'v' to begin selection as in Vim
bind-key -t vi-copy v begin-selection
bind-key -t vi-copy y copy-pipe "reattach-to-user-namespace pbcopy"
# update default binding of 'Enter' to also use copy-pipe
unbind -t vi-copy Enter
bind-key -t vi-copy Enter copy-pipe "reattach-to-user-namespace pbcopy"

bind y run 'tmux save-buffer - | reattach-to-user-namespace pbcopy '
bind C-y run 'tmux save-buffer - | reattach-to-user-namespace pbcopy '


###
# Keybindings
###

# Switch to Last active window
bind-key a last-window

# Reload configuration
bind r source-file ~/.tmux.conf \; display " Tmux Conf Reloaded!"

bind -n C-l run "(tmux display-message -p '#{pane_title}' | grep -iq vim && tmux send-keys C-l) || tmux select-pane -R"

# Smart pane switching with awareness of vim splits
# # See: https://github.com/christoomey/vim-tmux-navigator
is_vim='echo "#{pane_current_command}" | grep -iqE "(^|\/)g?(view|n?vim?x?)(diff)?$"'
bind -n C-h if-shell "$is_vim" "send-keys C-h" "select-pane -L"
bind -n C-j if-shell "$is_vim" "send-keys C-j" "select-pane -D"
bind -n C-k if-shell "$is_vim" "send-keys C-k" "select-pane -U"
bind -n C-l if-shell "$is_vim" "send-keys C-l" "select-pane -R"
bind -n C-\ if-shell "$is_vim" "send-keys C-\\" "select-pane -l"

# Split
unbind %
unbind '"'
unbind o
bind h split-window -h # Split panes horizontal
bind v split-window -v # Split panes vertically

# Resize
bind H resize-pane -L 5
bind J resize-pane -D 5
bind K resize-pane -U 5
bind L resize-pane -R 5

# Kill window
bind X kill-window
bind Q kill-session

# Mouse support - set to on if you want to use the mouse
setw -g mode-mouse on
set -g mouse-select-pane on
set -g mouse-resize-pane on
set -g mouse-select-window on

# ----------------------
# set some pretty colors
# ----------------------
# panes
 #set pane colors - hilight the active pane
set -g pane-border-fg black
set -g pane-active-border-fg brightred
#set-option -g pane-border-fg colour235 #base02
#set-option -g pane-active-border-fg colour240 #base01

# messaging
set -g message-fg black
set -g message-bg yellow
set -g message-command-fg blue
set -g message-command-bg black

# ----------------------
# Status Bar
# -----------------------
set-option -g status on                # turn the status bar on
set -g status-utf8 on                  # set utf-8 for the status bar
set -g status-interval 5               # set update frequencey (default 15 seconds)
set -g status-justify centre           # center window list for clarity
# set-option -g status-position top    # position the status bar at top of screen
set-option -g status-justify centre


# visual notification of activity in other windows
setw -g monitor-activity on
set -g visual-activity on

# set color for status bar
set -g status-bg default
set -g status-fg colour12
set -g status-interval 2
set-option -g status-attr dim 
set-option -g status-attr bright

# set window list colors - red for active and cyan for inactive
setw -g window-status-current-bg colour226
setw -g window-status-current-fg colour232
setw -g window-status-current-attr dim
setw -g window-status-bg colour237
setw -g window-status-fg colour51
setw -g window-status-current-attr bright
setw -g window-status-attr bright

# show host name and IP address on left side of status bar
set -g status-left-length 120
set -g status-left "#[fg=white]:: #[fg=magenta]#(who | cut -d \" \" -f1) #[fg=white]:: #[fg=green]#H #[fg=white]:: #[fg=yellow] #[fg=yellow]#(ifconfig eth0 | grep 'inet ' | awk '{print \"eth0 -> \" $2}') #[fg=red]#(ifconfig tun0 | grep 'inet ' | awk '{print \"vpn \" $2}') "

# show session name, window & pane number, date and time on right side of
# status bar
set -g status-right-length 120
set -g status-right "#[fg=cyan]#S #I:#P #[fg=white]:: #[fg=yellow]%d %b %Y #[fg=white]:: #[fg=green]%l:%M:%S %p #[fg=white]::"
